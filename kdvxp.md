# kdvxp
The kdvx protocol, an all inclusive decentralized chat protocol for any purpose  
The main features include text and vocie communication, as well as media share  

## protocol list

### client
The following commands need to be implemented for this protocol for the client:  
```
:login <username> <passwd>:     -- login functionallity, username and password must match servers
:pong:                          -- tell server you're alive, must be sent in response to :ping <s>: in 's' seconds 
:msg <channel>: <message>       -- Generic text message
:send <filename>:               -- start sending file bytes
:dnes <filename>:               -- stop sending file bytes
:take <filename> <channel>:     -- start taking filename from <channel>
:open <channel>:                -- start getting data from <channel>
:read <channel>:                -- update content from an already open <channel>
:close <channel>:               -- stop getting data from <channel> 
:open-voice <voice-channel>:    -- start sending voice data over separate port
:close-voice <voice-channel>:   -- end sending voice data
:err <err-code>:                -- signal an error has occured
```

### server
The following commands need to be implemented for the server:  
```
:ping <s>:                      -- await 'pong' command for <s> seconds
:req-login:                     -- request a login from client
:send <filename>:               -- response to 'take' command
:dnes <filename>:               -- end response to 'take' command
:contents <channel>:            -- start sending new contents of <channel>
:stnetnoc <channel>:            -- signal end of new contents of <channel>
:voice-allowed <voice-id>:      -- send id to link voice user and account
:suc <suc-code>:                -- signal generic success
:err <err-code>: <message>      -- signal an error has occured
```

### success codes
```
0: Connected            A connection was made, first thing sent

1: RecievedMsg          Message was recieved

2: RecievedData         File data was successfully recieved,
                        continue sending it

3: ClosedChannel        Closed a channel for the client

4: ClosedVoice          Voice channel was closed
```

### err codes
```
0: EndConnection        Signals that an error ends connection, 
                        can be used in-front of any other error 

1: BadLogin             Signals that the login failed

2: PermDenied           User does not have permission to 
                        perform requested command

3: DoesNotExist	        Indicates requested channel/media
                        does not exist, stop waiting for it

4: VoiceOccupied        Your account is already in a voice
                        channel

5: BadData              Failed to get data, rerequesting it
...
```

## voice
voice will be done over a separate port in order to ensure you can send text while in a voice channel.  
This will mostly be controlled by the main connection, with only content being sent through this port.  
an initial voice connection needs a header as follows:  
```
:connect-as <voice-id>:
```
The voice id is generated by the server and is supplied in the `voice-allowed` command  

